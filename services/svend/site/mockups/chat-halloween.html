<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Svend - Happy Halloween! (Oct 31 Only)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&family=Creepster&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            /* Halloween palette - still dark forest but with spooky accents */
            --bg-primary: #0a0a0f;
            --bg-secondary: #0d0d12;
            --bg-tertiary: #12121a;
            --bg-hover: #1a1a26;
            --accent-primary: #4a9f6e;        /* Keep the green but now it's "poison green" */
            --accent-primary-dim: rgba(74, 159, 110, 0.15);
            --accent-primary-border: rgba(74, 159, 110, 0.3);
            --accent-blue: #3a7f8f;
            --accent-purple: #7a4f9f;         /* More vibrant purple for Halloween */
            --accent-gold: #e8c547;
            --accent-orange: #e87020;         /* Pumpkin orange! */
            --accent-blood: #8f2020;          /* Blood red */
            --text-primary: #e8e8ef;
            --text-secondary: #9a9aaa;
            --text-dim: #5a5a6a;
            --tool-chemistry: #4a9f6e;        /* Potion green */
            --spooky-glow: #4aff6e;           /* Bright eerie glow */
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            overflow-x: hidden;
        }

        .katex { font-size: 1.1em; color: var(--text-primary); }
        .katex-display { margin: 0.75rem 0; }

        /* ========== HALLOWEEN DECORATIONS ========== */

        /* Floating ghosts */
        .ghost {
            position: fixed;
            font-size: 2rem;
            opacity: 0.15;
            pointer-events: none;
            z-index: 1000;
            animation: float-ghost 8s ease-in-out infinite;
            filter: blur(1px);
        }

        @keyframes float-ghost {
            0%, 100% { transform: translateY(0) translateX(0) rotate(-5deg); }
            25% { transform: translateY(-20px) translateX(10px) rotate(5deg); }
            50% { transform: translateY(-10px) translateX(-10px) rotate(-3deg); }
            75% { transform: translateY(-30px) translateX(5px) rotate(3deg); }
        }

        /* Bats flying across */
        .bat {
            position: fixed;
            font-size: 1rem;
            opacity: 0.2;
            pointer-events: none;
            z-index: 1000;
            animation: fly-bat 15s linear infinite;
        }

        @keyframes fly-bat {
            0% { transform: translateX(-50px) translateY(0); }
            25% { transform: translateX(25vw) translateY(-30px); }
            50% { transform: translateX(50vw) translateY(20px); }
            75% { transform: translateX(75vw) translateY(-20px); }
            100% { transform: translateX(110vw) translateY(10px); }
        }

        /* Spooky mist at bottom */
        .mist {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(to top,
                rgba(74, 159, 110, 0.08) 0%,
                rgba(74, 159, 110, 0.03) 50%,
                transparent 100%);
            pointer-events: none;
            z-index: 999;
            animation: mist-drift 10s ease-in-out infinite;
        }

        @keyframes mist-drift {
            0%, 100% { opacity: 0.8; transform: translateX(0); }
            50% { opacity: 1; transform: translateX(-20px); }
        }

        /* Pumpkin decorations */
        .pumpkin {
            position: fixed;
            font-size: 1.5rem;
            opacity: 0.3;
            pointer-events: none;
            z-index: 1000;
            animation: pumpkin-glow 3s ease-in-out infinite;
        }

        @keyframes pumpkin-glow {
            0%, 100% {
                opacity: 0.25;
                filter: drop-shadow(0 0 5px rgba(232, 112, 32, 0.3));
            }
            50% {
                opacity: 0.4;
                filter: drop-shadow(0 0 15px rgba(232, 112, 32, 0.6));
            }
        }

        /* ========== SIDEBAR ========== */
        .sidebar {
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid rgba(122, 79, 159, 0.15);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            position: relative;
        }

        .sidebar-header {
            padding: 1.25rem 1rem;
            border-bottom: 1px solid rgba(122, 79, 159, 0.15);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            font-weight: 300;
            letter-spacing: 0.3em;
        }

        .logo-icon { width: 1.25rem; height: 1.25rem; flex-shrink: 0; }
        .logo-icon svg { width: 100%; height: 100%; fill: none; stroke: var(--accent-orange); stroke-width: 20; }

        /* Spooky logo glow */
        .logo {
            text-shadow: 0 0 10px rgba(232, 112, 32, 0.3);
        }

        .halloween-badge {
            display: inline-block;
            padding: 0.2rem 0.4rem;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-purple));
            border-radius: 3px;
            font-size: 0.55rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-left: 0.5rem;
            animation: badge-pulse 2s ease-in-out infinite;
        }

        @keyframes badge-pulse {
            0%, 100% { opacity: 0.9; }
            50% { opacity: 1; box-shadow: 0 0 10px rgba(232, 112, 32, 0.5); }
        }

        .new-chat-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            margin-top: 1rem;
            background: rgba(122, 79, 159, 0.15);
            border: 1px solid rgba(122, 79, 159, 0.3);
            border-radius: 4px;
            color: var(--accent-purple);
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
        }

        .chat-history { flex: 1; overflow-y: auto; padding: 0.5rem; }

        .chat-history-item {
            padding: 0.75rem 1rem;
            border-radius: 4px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            margin-bottom: 0.25rem;
        }

        .chat-history-item:hover { background: var(--bg-hover); color: var(--text-primary); }
        .chat-history-item.active {
            background: rgba(122, 79, 159, 0.15);
            color: var(--text-primary);
            border-left: 2px solid var(--accent-purple);
        }

        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid rgba(122, 79, 159, 0.15);
        }

        .user-info { display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem; }

        .user-avatar {
            width: 32px; height: 32px; border-radius: 50%;
            background: rgba(122, 79, 159, 0.15);
            border: 1px solid rgba(122, 79, 159, 0.3);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; color: var(--accent-purple);
        }

        .user-name { font-size: 0.85rem; }
        .user-tier { font-size: 0.7rem; color: var(--text-dim); }

        /* ========== MAIN CONTENT ========== */
        .main { flex: 1; display: flex; flex-direction: column; min-width: 0; }

        .chat-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(122, 79, 159, 0.15);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chat-title {
            font-size: 0.9rem;
            font-weight: 400;
        }

        .chat-title-icon {
            font-size: 1.2rem;
            animation: title-wiggle 2s ease-in-out infinite;
        }

        @keyframes title-wiggle {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .messages {
            flex: 1; overflow-y: auto; padding: 1.5rem;
            display: flex; flex-direction: column; gap: 2rem;
        }

        .message { max-width: 900px; width: 100%; margin: 0 auto; }

        .message-user { display: flex; justify-content: flex-end; }

        .message-user .message-content {
            background: var(--bg-tertiary);
            border: 1px solid rgba(122, 79, 159, 0.15);
            border-radius: 12px 12px 4px 12px;
            padding: 1rem 1.25rem;
            max-width: 70%;
        }

        .message-assistant { display: flex; flex-direction: column; gap: 1rem; }

        .message-header { display: flex; align-items: center; gap: 0.5rem; }

        .assistant-icon {
            width: 24px; height: 24px; border-radius: 4px;
            background: rgba(122, 79, 159, 0.15);
            border: 1px solid rgba(122, 79, 159, 0.3);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem;
        }

        .assistant-name { font-size: 0.8rem; font-weight: 500; color: var(--text-secondary); }

        /* ========== REASONING PANEL - SPOOKY POTION THEME ========== */
        .reasoning-panel {
            background: var(--bg-secondary);
            border: 1px solid rgba(74, 159, 110, 0.2);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(74, 159, 110, 0.1);
        }

        .reasoning-header {
            padding: 0.75rem 1rem;
            background: rgba(74, 159, 110, 0.08);
            border-bottom: 1px solid rgba(74, 159, 110, 0.15);
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
        }

        .reasoning-title {
            display: flex; align-items: center; gap: 0.5rem;
            font-size: 0.75rem; font-weight: 500;
            text-transform: uppercase; letter-spacing: 0.1em;
            color: var(--accent-primary);
        }

        .reasoning-meta {
            display: flex; align-items: center; gap: 1rem;
            font-size: 0.75rem; color: var(--text-dim);
        }

        .reasoning-steps { padding: 1.25rem; }

        .step { display: flex; gap: 0.75rem; margin-bottom: 1.25rem; }
        .step:last-child { margin-bottom: 0; }

        .step-indicator { display: flex; flex-direction: column; align-items: center; }

        .step-number {
            width: 22px; height: 22px; border-radius: 50%;
            background: rgba(74, 159, 110, 0.15);
            border: 1px solid rgba(74, 159, 110, 0.3);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.65rem; font-weight: 500; color: var(--accent-primary);
        }

        .step-line {
            flex: 1; width: 1px;
            background: rgba(74, 159, 110, 0.3);
            min-height: 30px;
            animation: bubble-rise 2s ease-in-out infinite;
        }

        @keyframes bubble-rise {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .step-content { flex: 1; padding-bottom: 0.5rem; }

        .step-label {
            font-size: 0.7rem; font-weight: 500;
            text-transform: uppercase; letter-spacing: 0.05em;
            color: var(--text-dim); margin-bottom: 0.5rem;
        }

        .step-text {
            font-size: 0.9rem; color: var(--text-secondary); line-height: 1.7;
        }

        /* Chemical equation - bubbling potion style */
        .chem-equation {
            background: var(--bg-primary);
            border: 1px solid rgba(74, 159, 110, 0.3);
            border-radius: 6px;
            padding: 1rem 1.25rem;
            margin: 0.75rem 0;
            font-size: 1.1rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .chem-equation::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg,
                transparent,
                var(--spooky-glow),
                transparent);
            animation: potion-glow 3s ease-in-out infinite;
        }

        @keyframes potion-glow {
            0%, 100% { opacity: 0.3; transform: scaleX(0.8); }
            50% { opacity: 0.8; transform: scaleX(1); }
        }

        .chem-equation .arrow {
            margin: 0 0.75rem;
            color: var(--accent-primary);
        }

        .chem-equation .coeff {
            color: var(--accent-orange);
            font-weight: 500;
        }

        .chem-equation sub {
            font-size: 0.75em;
            vertical-align: baseline;
            position: relative;
            top: 0.3em;
        }

        /* Potion ingredients display */
        .potion-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }

        .potion-card {
            background: var(--bg-primary);
            border: 1px solid rgba(74, 159, 110, 0.25);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            flex: 1;
            min-width: 180px;
            position: relative;
            overflow: hidden;
        }

        .potion-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 10%;
            right: 10%;
            height: 30px;
            background: radial-gradient(ellipse at center bottom,
                rgba(74, 255, 110, 0.15) 0%,
                transparent 70%);
            animation: potion-bubble 2s ease-in-out infinite;
        }

        @keyframes potion-bubble {
            0%, 100% { transform: scaleY(1); opacity: 0.5; }
            50% { transform: scaleY(1.2); opacity: 0.8; }
        }

        .potion-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: ingredient-float 3s ease-in-out infinite;
        }

        @keyframes ingredient-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .potion-name {
            font-size: 0.85rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .potion-formula {
            font-size: 0.75rem;
            color: var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Tool Call */
        .tool-call {
            background: var(--bg-primary);
            border: 1px solid rgba(74, 159, 110, 0.3);
            border-radius: 6px;
            margin: 0.75rem 0;
            overflow: hidden;
        }

        .tool-call-header {
            padding: 0.5rem 0.75rem;
            background: rgba(74, 159, 110, 0.1);
            border-bottom: 1px solid rgba(74, 159, 110, 0.2);
            display: flex; align-items: center; gap: 0.5rem;
        }

        .tool-badge {
            padding: 0.2rem 0.5rem; border-radius: 3px;
            font-size: 0.65rem; font-weight: 500;
            text-transform: uppercase; letter-spacing: 0.05em;
        }

        .tool-badge--potion {
            background: rgba(74, 159, 110, 0.2);
            color: var(--tool-chemistry);
        }

        .tool-badge--cauldron {
            background: rgba(122, 79, 159, 0.2);
            color: var(--accent-purple);
        }

        .tool-call-name { font-size: 0.75rem; color: var(--text-dim); }

        .tool-call-body { padding: 0.75rem; }

        .code-block {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem; line-height: 1.5;
            color: var(--text-primary); white-space: pre-wrap;
        }

        .tool-call-result {
            padding: 0.75rem;
            background: rgba(74, 159, 110, 0.08);
            border-top: 1px solid rgba(74, 159, 110, 0.15);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-primary);
        }

        /* Final Answer - Spooky scroll style */
        .final-answer {
            padding: 1.25rem 1.5rem;
            background: var(--bg-tertiary);
            border: 1px solid rgba(232, 112, 32, 0.2);
            border-radius: 8px;
            position: relative;
        }

        .final-answer::before {
            content: '~';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: var(--accent-orange);
            animation: candle-flicker 0.5s ease-in-out infinite;
        }

        @keyframes candle-flicker {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .final-answer-label {
            font-size: 0.7rem; font-weight: 500;
            text-transform: uppercase; letter-spacing: 0.1em;
            color: var(--accent-orange);
            margin-bottom: 1rem;
            display: flex; align-items: center; gap: 0.5rem;
        }

        .final-answer-text {
            font-size: 1rem; line-height: 1.8; color: var(--text-primary);
        }

        .answer-box {
            display: inline-block;
            padding: 0.75rem 1.25rem;
            background: rgba(74, 159, 110, 0.1);
            border: 1px solid rgba(74, 159, 110, 0.25);
            border-radius: 6px;
            margin-top: 0.5rem;
        }

        .verified-badge {
            display: inline-flex; align-items: center; gap: 0.25rem;
            padding: 0.15rem 0.4rem;
            background: rgba(74, 159, 110, 0.15);
            border-radius: 3px;
            font-size: 0.65rem;
            color: var(--accent-primary);
        }

        /* Warning box for "dangerous" potions */
        .caution-box {
            background: rgba(143, 32, 32, 0.1);
            border: 1px solid rgba(143, 32, 32, 0.3);
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin: 0.75rem 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .caution-icon {
            font-size: 1.25rem;
        }

        .caution-text {
            font-size: 0.85rem;
            color: var(--accent-blood);
        }

        /* Input Area */
        .input-area {
            padding: 1rem 1.5rem 1.5rem;
            border-top: 1px solid rgba(122, 79, 159, 0.15);
        }

        .input-container { max-width: 900px; margin: 0 auto; position: relative; }

        .input-box {
            width: 100%; padding: 1rem 1.25rem; padding-right: 100px;
            background: var(--bg-secondary);
            border: 1px solid rgba(122, 79, 159, 0.2);
            border-radius: 8px; color: var(--text-primary);
            font-family: inherit; font-size: 0.95rem;
            resize: none; outline: none; min-height: 56px;
        }

        .input-box::placeholder { color: var(--text-dim); }
        .input-box:focus { border-color: rgba(122, 79, 159, 0.4); }

        .input-actions { position: absolute; right: 0.75rem; bottom: 0.75rem; }

        .send-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-orange));
            border: none; border-radius: 4px; color: white;
            font-family: inherit; font-size: 0.85rem; font-weight: 500;
            cursor: pointer;
        }

        .send-btn:hover {
            box-shadow: 0 0 15px rgba(232, 112, 32, 0.4);
        }

        .input-hint {
            text-align: center; margin-top: 0.75rem;
            font-size: 0.75rem; color: var(--text-dim);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(122, 79, 159, 0.2); border-radius: 3px; }

        @media (max-width: 900px) { .sidebar { display: none; } }

        /* Spider web in corner */
        .spider-web {
            position: fixed;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            opacity: 0.1;
            pointer-events: none;
            z-index: 1000;
            background: radial-gradient(circle at 100% 0%, transparent 50%, rgba(255,255,255,0.1) 50.5%, transparent 51%),
                        radial-gradient(circle at 100% 0%, transparent 70%, rgba(255,255,255,0.1) 70.5%, transparent 71%),
                        radial-gradient(circle at 100% 0%, transparent 90%, rgba(255,255,255,0.1) 90.5%, transparent 91%);
        }

        /* ========== FIREFLIES ========== */
        .firefly {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--spooky-glow);
            pointer-events: none;
            z-index: 1001;
            box-shadow:
                0 0 6px 2px var(--spooky-glow),
                0 0 12px 4px rgba(74, 255, 110, 0.4),
                0 0 20px 8px rgba(74, 255, 110, 0.2);
            animation: firefly-glow 2s ease-in-out infinite, firefly-drift 12s ease-in-out infinite;
        }

        @keyframes firefly-glow {
            0%, 100% {
                opacity: 0;
                transform: scale(0.5);
            }
            15%, 85% {
                opacity: 0.9;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        @keyframes firefly-drift {
            0% {
                transform: translate(0, 0);
            }
            25% {
                transform: translate(30px, -40px);
            }
            50% {
                transform: translate(-20px, -20px);
            }
            75% {
                transform: translate(40px, 30px);
            }
            100% {
                transform: translate(0, 0);
            }
        }

        /* Different drift patterns for variety */
        .firefly--drift2 {
            animation: firefly-glow 2.5s ease-in-out infinite, firefly-drift2 15s ease-in-out infinite;
        }

        @keyframes firefly-drift2 {
            0% { transform: translate(0, 0); }
            20% { transform: translate(-40px, 20px); }
            40% { transform: translate(20px, 50px); }
            60% { transform: translate(50px, -30px); }
            80% { transform: translate(-30px, -50px); }
            100% { transform: translate(0, 0); }
        }

        .firefly--drift3 {
            animation: firefly-glow 3s ease-in-out infinite, firefly-drift3 18s ease-in-out infinite;
        }

        @keyframes firefly-drift3 {
            0% { transform: translate(0, 0); }
            33% { transform: translate(60px, 40px); }
            66% { transform: translate(-50px, -30px); }
            100% { transform: translate(0, 0); }
        }

        /* Firefly trail effect */
        .firefly::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background: linear-gradient(to left, var(--spooky-glow), transparent);
            opacity: 0.4;
            left: -18px;
            top: 50%;
            transform: translateY(-50%);
            border-radius: 2px;
        }

        /* Creepy font for special elements */
        .creepy-text {
            font-family: 'Creepster', cursive;
        }
    </style>
</head>
<body>
    <!-- Halloween Decorations -->
    <div class="mist"></div>
    <div class="spider-web"></div>

    <!-- Floating ghosts -->
    <div class="ghost" style="top: 15%; left: 5%; animation-delay: 0s;">&#128123;</div>
    <div class="ghost" style="top: 60%; right: 8%; animation-delay: 2s;">&#128123;</div>
    <div class="ghost" style="top: 35%; left: 45%; animation-delay: 4s; font-size: 1.5rem;">&#128123;</div>

    <!-- Flying bats -->
    <div class="bat" style="top: 10%; animation-delay: 0s;">&#129415;</div>
    <div class="bat" style="top: 25%; animation-delay: 5s;">&#129415;</div>
    <div class="bat" style="top: 45%; animation-delay: 10s;">&#129415;</div>

    <!-- Pumpkins -->
    <div class="pumpkin" style="bottom: 10%; left: 3%;">&#127875;</div>
    <div class="pumpkin" style="bottom: 15%; right: 5%; animation-delay: 1.5s;">&#127875;</div>

    <!-- Fireflies drifting through the dark forest -->
    <div class="firefly" style="top: 20%; left: 15%; animation-delay: 0s;"></div>
    <div class="firefly firefly--drift2" style="top: 40%; left: 70%; animation-delay: 1s;"></div>
    <div class="firefly firefly--drift3" style="top: 65%; left: 25%; animation-delay: 2s;"></div>
    <div class="firefly" style="top: 30%; right: 20%; animation-delay: 0.5s;"></div>
    <div class="firefly firefly--drift2" style="top: 75%; right: 30%; animation-delay: 1.5s;"></div>
    <div class="firefly firefly--drift3" style="top: 50%; left: 50%; animation-delay: 3s;"></div>
    <div class="firefly" style="top: 85%; left: 60%; animation-delay: 2.5s;"></div>
    <div class="firefly firefly--drift2" style="top: 15%; right: 40%; animation-delay: 0.8s;"></div>

    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon">
                    <svg viewBox="590 180 400 680" xmlns="http://www.w3.org/2000/svg"><path d="m 810.34961,183.98438 c -8.00929,0.28308 -15.5701,3.48413 -22.48495,7.32376 -12.87788,7.1817 -24.40922,16.65459 -37.84868,22.84732 -4.31757,2.08674 -9.12821,2.91574 -13.3771,5.16756 -7.15857,3.4834 -13.4768,8.9205 -17.4074,15.89893 -4.63628,8.03202 -6.3024,17.46727 -6.06699,26.65644 0.0985,4.79617 0.75632,9.56171 1.64764,14.269 0.0476,1.43947 -0.58472,2.80552 -0.6551,4.24336 -0.75319,5.38879 0.11601,11.14811 3.19493,15.71841 3.74987,5.93489 9.53028,10.16542 15.27939,14.00871 10.15322,6.72796 21.26277,12.12274 30.43779,20.24424 0.72261,0.57357 1.06428,1.45781 1.01481,2.36706 0.25419,10.62114 0.26429,21.24817 0.15168,31.87217 -0.10997,9.76491 -0.23395,19.53062 -0.32352,29.29514 -0.2559,2.18138 -2.48681,3.93272 -4.67536,3.50098 -1.73761,-0.32579 -2.97662,-1.73361 -4.40792,-2.66331 -35.6616,-26.03244 -71.15984,-52.30412 -107.51397,-77.36576 -1.79592,-1.18526 -3.52006,-2.4953 -5.36053,-3.6031 -2.38777,-1.13215 -5.02429,-1.65761 -7.63204,-1.97563 -6.86268,-0.69881 -13.69347,1.24508 -19.88444,4.07709 -9.03352,4.05728 -17.18145,9.7518 -25.58752,14.92132 -3.36838,2.10086 -6.87005,4.24739 -10.41869,6.1631 -0.99569,0.52942 -2.22,1.17581 -3.31848,1.71944 -4.07079,2.03607 -8.31873,3.71411 -12.69879,4.95454 -4.02638,1.19323 -7.8786,3.2257 -10.74869,6.34031 -2.96251,3.09048 -4.72915,7.11427 -5.71781,11.23537 -1.55545,6.40335 -1.57897,13.05115 -1.41863,19.6009 0.26795,9.17433 1.23843,18.2732 1.00241,27.46227 0.0207,3.42545 -1.03941,6.75735 -0.90681,10.1895 0.001,5.08446 1.56132,10.25252 4.8747,14.1707 4.43736,5.53069 10.76398,9.06598 17.04291,12.11545 11.82295,5.71965 24.58514,9.32817 36.12161,15.66465 2.63761,1.56679 5.14743,3.4485 8.1405,4.29671 4.09389,1.33597 8.5369,1.2958 12.69456,0.26955 7.31277,-1.64267 13.9237,-5.32376 20.51953,-8.74387 4.35604,-2.28907 8.66919,-4.70056 13.22314,-6.57805 2.19027,-0.44436 4.29633,0.48096 6.39883,0.88652 1.12616,0.30405 2.24944,0.63792 3.42471,1.02929 9.89759,3.32419 18.80495,8.95253 27.35797,14.83159 9.60214,6.67635 18.83584,13.8873 28.67442,20.21701 1.81523,1.44232 2.01025,4.45281 0.29511,6.05269 -1.18127,1.12727 -2.69962,1.81802 -4.02559,2.7576 -20.09966,13.11068 -40.67378,25.47586 -60.8399,38.48291 -9.96369,-3.64417 -18.76816,-9.70519 -28.31054,-14.23828 -5.34352,-2.47216 -11.27535,-4.34129 -17.22237,-3.5115 -2.23037,0.31113 -4.43888,1.00335 -6.29472,2.30511 -9.41413,5.6132 -20.00552,8.69886 -30.20947,12.5061 -7.8109,2.84323 -15.72475,5.92179 -22.32775,11.09558 -4.14348,3.33658 -7.40401,8.02695 -8.19394,13.36751 -0.75011,4.4178 0.0808,8.89125 -0.11393,13.33558 -0.0446,2.47431 -0.1663,4.78571 -0.33618,7.26123 -0.7016,9.88267 -2.18914,19.87652 -1.92566,29.86437 0.15833,5.61102 0.98818,11.38546 3.72433,16.36565 2.44787,4.28244 6.64099,7.37128 11.27534,8.93309 2.96165,1.01936 5.95313,1.9621 8.82273,3.22974 16.61941,6.96981 31.54004,17.40843 48.2906,24.09353 8.35504,3.30306 17.3626,5.41067 26.39188,4.73995 1.59654,-0.65955 2.95687,-1.7592 4.46121,-2.59492 34.97252,-21.48909 67.36925,-46.77662 100.70996,-70.64113 2.40223,-1.72533 4.80662,-3.4479 7.20969,-5.17216 3.12283,0.94464 6.45003,2.34189 8.1566,5.30326 2.63181,4.23393 2.95848,9.37168 3.10974,14.22553 0.0833,3.31727 0.004,6.60823 -0.11791,9.87356 -0.21995,6.79385 -0.7923,13.61211 -0.125,20.39843 0.20259,2.16638 0.20474,4.521 -0.33146,6.70372 -1.0519,4.92922 -3.98913,9.33555 -7.88721,12.48684 -4.60501,3.92369 -10.18337,6.53657 -15.54322,9.09565 -5.27007,2.60362 -10.87123,4.82949 -15.34311,8.75008 -3.14872,2.8351 -5.29862,6.60832 -6.92578,10.47774 -3.38575,8.39922 -4.00047,17.60263 -3.79623,26.56693 0.33468,12.34083 2.50879,24.53129 4.78404,36.63584 23.29475,15.98048 48.86901,28.22319 74.1637,40.59903 3.68993,1.78904 7.35713,3.65372 11.08044,5.36581 1.3382,0.36422 2.72081,0.68421 4.08264,0.85588 14.97883,-4.04776 28.84434,-11.24143 42.34205,-18.73961 11.53711,-6.35617 22.86975,-13.13079 34.83628,-18.66637 4.22894,-1.55707 8.44379,-3.61358 11.45999,-7.06209 4.09602,-4.4785 5.93166,-10.51995 6.66278,-16.43202 0.92354,-7.35214 0.49188,-14.78778 -0.0139,-22.15442 -0.67411,-9.31054 -1.67798,-18.63084 -1.29362,-27.9791 -5.24479,-6.86889 -12.45843,-11.86973 -19.80582,-16.25267 -5.70939,-3.42205 -11.57773,-6.5755 -17.2495,-9.97521 -3.48793,-2.1042 -6.91214,-4.29698 -10.24384,-6.71085 -0.72961,-0.25274 -0.3909,-1.04781 -0.45847,-1.63664 0.10339,-17.34117 -0.25832,-34.68823 0.31622,-52.02424 0.0871,-2.86433 0.24803,-5.86427 0.35547,-8.77734 0.24524,-1.51291 0.97602,-2.92863 1.82743,-4.17922 1.01119,-0.96492 2.69388,-0.72675 3.64269,0.20957 13.7572,9.30561 27.45185,18.70282 41.06504,28.21769 14.32134,10.01422 28.62533,20.04233 42.89178,30.13048 9.85111,7.13736 19.42479,14.89572 30.55621,19.99718 6.32797,2.8654 13.46903,4.59642 20.40357,3.28445 5.01892,-0.91491 9.51952,-3.53842 13.56592,-6.54339 4.1904,-2.64327 8.6938,-4.74592 13.1878,-6.81289 12.49,-5.62316 25.6326,-9.85522 37.5685,-16.66375 6.6826,-3.86072 12.9614,-8.79041 17.159,-15.36138 0.077,-0.98215 -0.1432,-2.04092 -0.1765,-3.05218 -1.0891,-15.56938 0.8661,-31.18693 -0.42,-46.74805 -0.6817,-7.73457 -2.3041,-15.61186 -6.4028,-22.31119 -0.698,-1.07942 -1.3987,-2.21543 -2.2632,-3.14351 -6.5959,-2.34922 -12.9212,-5.37852 -19.1484,-8.56287 -8.7431,-4.45721 -17.485,-9.32684 -26.689,-12.95173 -7.9225,-3.0727 -16.4727,-5.18735 -25.01999,-4.27874 -0.69625,0.0946 -1.45907,0.031 -1.9507,0.62492 -1.86973,1.50356 -4.00206,2.99524 -5.93993,4.18562 -3.11255,1.91641 -6.61385,3.63178 -10.16309,4.85819 -5.17482,1.81524 -10.69246,2.62925 -16.17089,2.39377 -0.76721,-0.0353 -1.83478,-0.10813 -2.71485,-0.19727 -8.76802,-0.87792 -17.09685,-4.23876 -24.66465,-8.63987 -6.70946,-3.87704 -12.94638,-8.62728 -18.84121,-13.55739 -5.3555,-2.04179 -10.86973,-4.46433 -14.67498,-8.91892 -2.71108,-3.28176 -3.6238,-8.13451 -1.72969,-12.03365 1.92136,-4.4162 5.87455,-7.47217 9.75916,-10.09482 7.41881,-4.95593 15.60058,-8.5845 23.40489,-12.86517 3.87755,-2.08906 7.78444,-4.23221 11.15815,-7.08878 2.01088,-1.89507 3.89167,-4.04315 6.46834,-5.18776 3.79471,-1.90744 8.31932,-2.18549 12.35001,-0.87941 6.3308,1.82617 11.47084,6.14955 17.28242,9.06683 1.89042,0.93426 3.95479,1.46325 5.78158,2.52681 6.71632,3.31352 14.54253,4.15556 21.85253,2.61957 9.4786,-1.84944 18.1485,-6.35056 26.5334,-10.96985 11.3346,-6.30144 22.2737,-13.46349 34.3962,-18.21392 4.2955,-10.61758 5.7235,-22.14012 6.0312,-33.51651 0.3858,-15.15412 -1.1682,-30.25794 -2.2616,-45.35263 -12.3858,-9.88221 -26.6329,-16.99787 -40.689,-24.14553 -9.5,-4.83571 -19.0575,-9.61979 -28.0582,-15.35042 -6.12007,-4.66644 -14.05816,-6.41988 -21.64672,-5.96219 -1.19198,-0.0473 -2.37843,0.32604 -3.2616,1.13778 -38.22332,26.10576 -75.04874,54.16648 -112.57695,81.24614 -2.71304,0.6413 -5.49842,-0.66111 -7.54085,-2.3846 -2.98399,-2.60674 -4.29719,-6.57185 -4.74676,-10.40275 -0.82369,-5.94443 -0.34169,-11.84447 -0.0213,-17.79103 0.33714,-6.47411 1.01497,-12.99967 0.0809,-19.45673 -0.74071,-5.92858 1.52712,-12.06105 5.76034,-16.24201 4.84104,-4.96478 11.25754,-7.86952 17.35846,-10.94667 3.99683,-2.00052 8.09479,-3.99903 11.43912,-7.01665 0.99698,-0.95764 1.86712,-2.07596 3.12921,-2.70104 5.52795,-3.56549 9.52876,-9.28516 11.25959,-15.60778 2.32363,-7.95342 2.23731,-16.36205 1.6583,-24.55425 -0.85794,-10.76518 -2.81251,-21.40013 -4.13281,-32.11133 -21.60154,-15.33596 -45.2301,-27.50365 -68.56022,-39.89174 -5.52038,-2.93006 -11.02072,-5.90598 -16.52315,-8.86385 -2.21137,-0.75553 -4.61644,-0.71584 -6.9264,-0.73464 z"/></svg>
                </span>
                SVEND
                <span class="halloween-badge">&#127875; Spooky Mode</span>
            </div>
            <button class="new-chat-btn">+ New Spell</button>
        </div>
        <div class="chat-history">
            <div class="chat-history-item active">&#129440; Witch's brew chemistry</div>
            <div class="chat-history-item">&#128128; Luminol blood detection</div>
            <div class="chat-history-item">&#127875; Pumpkin decomposition</div>
            <div class="chat-history-item">&#128375; Dry ice fog effects</div>
            <div class="chat-history-item">&#129415; Bat echolocation physics</div>
        </div>
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">&#129668;</div>
                <div>
                    <div class="user-name">witch.hazel@svend.ai</div>
                    <div class="user-tier">Spellcaster Access</div>
                </div>
            </div>
        </div>
    </aside>

    <main class="main">
        <header class="chat-header">
            <span class="chat-title-icon">&#129440;</span>
            <div class="chat-title">Witch's brew chemistry</div>
        </header>

        <div class="messages">
            <!-- User Message -->
            <div class="message message-user">
                <div class="message-content">
                    I want to make a glowing green "witch's potion" for Halloween that bubbles and produces fog. What's the chemistry behind this and how do I make it safely?
                </div>
            </div>

            <!-- Assistant Response -->
            <div class="message message-assistant">
                <div class="message-header">
                    <div class="assistant-icon">&#129668;</div>
                    <span class="assistant-name">Svend</span>
                </div>

                <div class="reasoning-panel">
                    <div class="reasoning-header">
                        <div class="reasoning-title">
                            <span>&#9670;</span> Brewing the Potion
                        </div>
                        <div class="reasoning-meta">
                            <span>4 steps</span>
                            <span>3 tool calls</span>
                            <span class="verified-badge">&#10003; Safe</span>
                        </div>
                    </div>

                    <div class="reasoning-steps">
                        <!-- Step 1: Identify ingredients -->
                        <div class="step">
                            <div class="step-indicator">
                                <div class="step-number">1</div>
                                <div class="step-line"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-label">&#128218; Gather Potion Ingredients</div>
                                <div class="step-text">
                                    A proper witch's brew needs three effects: <strong>glowing</strong>, <strong>bubbling</strong>, and <strong>fog</strong>. Here's the chemistry:
                                </div>
                                <div class="potion-container">
                                    <div class="potion-card">
                                        <div class="potion-icon">&#128161;</div>
                                        <div class="potion-name">Fluorescein</div>
                                        <div class="potion-formula">C<sub>20</sub>H<sub>12</sub>O<sub>5</sub></div>
                                        <div style="font-size: 0.7rem; color: var(--text-dim); margin-top: 0.25rem;">Glows green under UV!</div>
                                    </div>
                                    <div class="potion-card">
                                        <div class="potion-icon">&#129526;</div>
                                        <div class="potion-name">Dry Ice</div>
                                        <div class="potion-formula">CO<sub>2</sub> (solid)</div>
                                        <div style="font-size: 0.7rem; color: var(--text-dim); margin-top: 0.25rem;">-78.5°C = spooky fog!</div>
                                    </div>
                                    <div class="potion-card">
                                        <div class="potion-icon">&#127863;</div>
                                        <div class="potion-name">Tonic Water</div>
                                        <div class="potion-formula">Quinine</div>
                                        <div style="font-size: 0.7rem; color: var(--text-dim); margin-top: 0.25rem;">Natural UV fluorescence</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Glowing chemistry -->
                        <div class="step">
                            <div class="step-indicator">
                                <div class="step-number">2</div>
                                <div class="step-line"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-label">&#10024; The Glow: Fluorescence</div>
                                <div class="tool-call">
                                    <div class="tool-call-header">
                                        <span class="tool-badge tool-badge--potion">Potion</span>
                                        <span class="tool-call-name">fluorescence_analysis</span>
                                    </div>
                                    <div class="tool-call-body">
                                        <code class="code-block"># Quinine fluorescence
absorption_wavelength = 350  # nm (UV-A)
emission_wavelength = 450    # nm (blue-violet glow)

# Fluorescein fluorescence
absorption_fl = 494  # nm (blue)
emission_fl = 521    # nm (bright GREEN!)

# Stokes shift (energy loss)
stokes_quinine = emission - absorption  # 100 nm
stokes_fluorescein = 521 - 494          # 27 nm</code>
                                    </div>
                                    <div class="tool-call-result">
Quinine: UV light (350nm) &#10230; Blue glow (450nm)
Fluorescein: Blue light (494nm) &#10230; GREEN glow (521nm) &#128154;</div>
                                </div>
                                <div class="step-text" style="margin-top: 0.75rem;">
                                    <strong>Why it glows:</strong> UV photons excite electrons to higher energy states. When they drop back down, they emit visible light. Fluorescein's emission at 521nm is that perfect <span style="color: var(--spooky-glow);">eerie green</span>!
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Fog chemistry -->
                        <div class="step">
                            <div class="step-indicator">
                                <div class="step-number">3</div>
                                <div class="step-line"></div>
                            </div>
                            <div class="step-content">
                                <div class="step-label">&#127787; The Fog: Sublimation</div>
                                <div class="tool-call">
                                    <div class="tool-call-header">
                                        <span class="tool-badge tool-badge--cauldron">Cauldron</span>
                                        <span class="tool-call-name">phase_transition</span>
                                    </div>
                                    <div class="tool-call-body">
                                        <code class="code-block"># Dry ice sublimation
CO2_solid = -78.5  # °C at 1 atm
CO2_gas = "directly sublimates"  # no liquid phase!

# The "fog" is actually water vapor condensing
# Cold CO2 gas chills surrounding air
# Water vapor in air condenses into tiny droplets
fog_composition = "H2O microdroplets (not CO2!)"</code>
                                    </div>
                                    <div class="tool-call-result">
CO<sub>2</sub>(s) &#10230; CO<sub>2</sub>(g) + chills air &#10230; H<sub>2</sub>O(g) condenses &#10230; SPOOKY FOG!</div>
                                </div>
                                <div class="chem-equation">
                                    CO<sub>2</sub>(s) <span class="arrow">&#10230;</span> CO<sub>2</sub>(g)
                                    <span style="color: var(--text-dim); margin-left: 1rem;">&#916;H = +571 kJ/kg</span>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Safety -->
                        <div class="step">
                            <div class="step-indicator">
                                <div class="step-number">4</div>
                            </div>
                            <div class="step-content">
                                <div class="step-label">&#9888; Safety Incantations</div>
                                <div class="caution-box">
                                    <span class="caution-icon">&#9888;&#65039;</span>
                                    <span class="caution-text"><strong>Never touch dry ice!</strong> Causes frostbite. Use tongs or insulated gloves.</span>
                                </div>
                                <div class="caution-box">
                                    <span class="caution-icon">&#128168;</span>
                                    <span class="caution-text"><strong>Ventilation required!</strong> CO<sub>2</sub> displaces oxygen. Use outdoors or in well-ventilated space.</span>
                                </div>
                                <div class="caution-box">
                                    <span class="caution-icon">&#127864;</span>
                                    <span class="caution-text"><strong>Don't drink the potion!</strong> Dry ice in drinks can cause internal frostbite. Let fog dissipate first.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Final Answer -->
                <div class="final-answer">
                    <div class="final-answer-label">
                        <span>&#129668;</span> The Complete Spell
                    </div>
                    <div class="final-answer-text">
                        <p class="creepy-text" style="font-size: 1.3rem; color: var(--accent-purple); margin-bottom: 1rem;">
                            Recipe for Witch's Glowing Brew:
                        </p>

                        <ol style="margin: 0.75rem 0 1rem 1.5rem; color: var(--text-secondary);">
                            <li>Fill a <strong>cauldron</strong> (or punch bowl) with tonic water</li>
                            <li>Add a few drops of <strong>highlighter fluid</strong> (contains fluorescein)</li>
                            <li>Set up a <strong>UV blacklight</strong> nearby</li>
                            <li>When ready, add <strong>dry ice chunks</strong> with tongs</li>
                            <li>Watch the <span style="color: var(--spooky-glow);">glowing, bubbling, foggy</span> potion come to life!</li>
                        </ol>

                        <div class="answer-box">
                            <p style="margin: 0;"><strong>Glow:</strong> Fluorescein + UV light &#10230; 521nm green emission</p>
                            <p style="margin: 0.25rem 0;"><strong>Fog:</strong> Dry ice sublimation &#10230; cold CO<sub>2</sub> condenses water vapor</p>
                            <p style="margin: 0;"><strong>Bubbles:</strong> CO<sub>2</sub> gas escaping through liquid</p>
                        </div>

                        <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                            <strong>Pro tip:</strong> For extra drama, add a few drops of green food coloring. The potion will glow even brighter under UV light, and the fog will have an ethereal green tint as it catches the light. Happy Halloween! &#127875;&#128123;&#129415;
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <textarea class="input-box" placeholder="Ask about potions, spooky science, or any Halloween chemistry..." rows="1"></textarea>
                <div class="input-actions">
                    <button class="send-btn">Cast Spell &#10024;</button>
                </div>
            </div>
            <div class="input-hint">
                &#127875; Happy Halloween from Svend! This theme is only available on October 31st &#128123;
            </div>
        </div>
    </main>

    <script>
        // Initialize KaTeX
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError: false
            });
        });

        // Auto-resize textarea
        const textarea = document.querySelector('.input-box');
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Add more random decorations dynamically
        function addSpookyElement(type, top, left, delay) {
            const el = document.createElement('div');
            el.className = type;
            el.style.top = top;
            el.style.left = left;
            el.style.animationDelay = delay;

            if (type === 'ghost') el.innerHTML = '&#128123;';
            else if (type === 'bat') el.innerHTML = '&#129415;';
            else if (type === 'pumpkin') el.innerHTML = '&#127875;';

            document.body.appendChild(el);
        }

        // Occasional spooky sound effect (just console for demo)
        setInterval(() => {
            if (Math.random() > 0.95) {
                console.log('&#128123; BOO! (This would play a sound in production)');
            }
        }, 10000);
    </script>
</body>
</html>
